<section>
  <h1><%= commodity %></h1>
  <div id="chart"></div>
</section>
<section>
<div class="description">
  <img src="http://cta.gate39tech2.com/ctaexpo/wp-content/uploads/sites/2/cta-logo6.png">
  <p>CME Group Inc. (Chicago Mercantile Exchange & Chicago Board of Trade) is an American financial market company operating the world's largest options and futures exchange. It owns and operates large derivatives and futures exchanges in Chicago, New York City, and exchange facilities in London, using online trading platforms.[3][4] It also owns the Dow Jones stock and financial indexes, and CME Clearing Services, which provides settlement and clearing of exchange trades. The exchange-traded derivative contracts include futures and options based on interest rates, equity indexes, foreign exchange, energy, agricultural commodities, rare and precious metals, weather, and real estate. It has been described by The Economist as "The biggest financial exchange you have never heard of."</p>
  <h4>Live Cattle Futures</h4>
  <p>Live cattle futures began trading in 1964 at the Chicago Mercantile Exchange (CME) as the first non-storable futures contract. Live cattle are traditionally raised in the Midwest, Southwest, and California (in the US). The term live cattle refers to cattle that have reached the necessary weight for slaughter.</p>
</div>
</section>
<section>
<table>
<tr>
     <% for(n=0; n<names.length-1;n++) { %>
     <th><%= names[n]%></th>
     <% } %>
</tr>
     <% for(var d in data) { %>
<tr>
     <td><%= data[d][0]%></td>
     <td><%= data[d][1]%></td>
     <td><%= data[d][2]%></td>
     <td><%= data[d][3]%></td>
     <td><%= data[d][4]%></td>
     <td><%= data[d][5]%></td>
     <td><%= data[d][6]%></td>
     <td><%= data[d][7]%></td>
</tr>
     <% } %>
</table>
</section>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>

<script>
console.log(`'<%=commodity%>'`);
var dates = ['Dates'];
var settle = ['settle'];
var high = ['high'];
var low = ['low'];
     <% for(var d in data) { %>
//console.log(`'<%=data[d][0]%>'`)
  dates.push(`<%=data[d][0]%>`)
  settle.push(`<%=data[d][6]%>`)
  high.push(`<%=data[d][2]%>`)
  low.push(`<%=data[d][3]%>`)
<%}%>

console.log(dates);

var chart = c3.generate({
    bindto: "#chart",
    data: {
      x: 'Dates',
   columns: [
       dates,
       settle,
       high,
       low
   ]    },
    axis: {
        x: {
            type: 'timeseries',
            tick: {
                format: '%Y-%m-%d'
            }
        }
    }
});
</script>
